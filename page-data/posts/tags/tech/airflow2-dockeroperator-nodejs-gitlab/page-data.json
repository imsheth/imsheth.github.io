{"componentChunkName":"component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js","path":"/posts/tags/tech/airflow2-dockeroperator-nodejs-gitlab","result":{"data":{"mdx":{"id":"90b1ceaa-517c-5012-9a28-4e75c0dd28fc","excerpt":"Jul 25, 2021 This post is focused on how to setup Apache Airflow 2 using DockerOperator with node.js and Gitlab container registry on Ubuntu 20 Ubuntu 20.x.xâ€¦","fields":{"slug":"/posts/tags/tech/airflow2-dockeroperator-nodejs-gitlab/"},"frontmatter":{"title":"The Hows - Apache Airflow 2 using DockerOperator with node.js and Gitlab container registry on Ubuntu 20","description":"This post is focused on how to setup Apache Airflow 2 using DockerOperator with node.js and Gitlab container registry on Ubuntu 20","image":"/posts/airflow2-dockeroperator-nodejs-gitlab/airflow2-dockeroperator-nodejs-gitlab-banner.png","disableTableOfContents":false},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"The Hows - Apache Airflow 2 using DockerOperator with node.js and Gitlab container registry on Ubuntu 20\",\n  \"description\": \"This post is focused on how to setup Apache Airflow 2 using DockerOperator with node.js and Gitlab container registry on Ubuntu 20\",\n  \"image\": \"/posts/airflow2-dockeroperator-nodejs-gitlab/airflow2-dockeroperator-nodejs-gitlab-banner.png\",\n  \"disableTableOfContents\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Jul 25, 2021\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    style: {\n      \"textAlign\": \"center\"\n    }\n  }, \"The motivation for writing this post is in the hope that it helps others save lots of time, energy and nerve wracking phases that can lead to self doubt which I had extensively faced and would want others to avoid them altogether.\")), mdx(\"p\", null, \"This post is focused on how to setup Apache Airflow 2 using DockerOperator with node.js and Gitlab container registry on Ubuntu 20\"), mdx(\"a\", {\n    href: \"https://github.com/imsheth/airflow2-dockeroperator-nodejs-gitlab\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"The relevant source code for the post can be found here\"), mdx(\"br\", null), mdx(\"br\", null), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"ubuntu-20xx\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#ubuntu-20xx\",\n    \"aria-label\": \"ubuntu 20xx permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Ubuntu 20.x.x\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Check the machine operating system, it should be Ubuntu 20.x.x to have the best shot at successful installation on the first attempt\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Our test machine operating system details (Ubuntu 20.04.2 LTS (Focal Fossa))\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"cat /etc/os-release\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/1.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/1.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-1-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"It is recommended to use the LTS version but not necessary\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"This completes Ubuntu check\"))), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"python-36\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#python-36\",\n    \"aria-label\": \"python 36 permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"python 3.6\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://github.com/apache/airflow#requirements\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Airflow works with specific versions of python, install python 3.6 as other versions aren't supported by airflow for DockerOperator though the documentation states otherwise\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://www.makeuseof.com/install-python-ubuntu/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"python ppa installation\"))), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Install python 3.6 and required packages\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo add-apt-repository ppa:deadsnakes/ppa && sudo apt-get update && sudo apt-get -y upgrade && sudo apt-get install software-properties-common && sudo apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev wget && sudo apt install python3.6 && python3.6 --version\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/2.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/2.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-2-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/3.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/3.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-3-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Verify python 3.6 installation path\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"whereis python\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/4.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/4.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-4-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Set environment/path/alias variables for python 3.6 & pip 20.2.4\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://stackoverflow.com/a/60083786/3152654\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Setting path variable for python 3.6\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://stackoverflow.com/a/41986556/3152654\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Set alias for python to point to python 3.6\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://askubuntu.com/a/956193\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Set alias for python to point to python 3.6 in .bashrc\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"echo 'export PATH=$PATH:\\\"/usr/bin/python3.6\\\"' >> ~/.bashrc && echo 'alias python=\\\"python3.6\\\"' >> ~/.bashrc && echo 'export PATH=$PATH:\\\"/home/ubuntu/.local/bin\\\"' >> ~/.bashrc && echo 'alias pip=\\\"pip3\\\"' >> ~/.bashrc && source ~/.bashrc && echo $PATH && python --version\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/5.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/5.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-5-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"pip 20.2.4\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://pip.pypa.io/en/stable/installing/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"pip installation\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/start/local.html\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Only pip installation is currently officially supported by Apache Airflow 2\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"cd /tmp && curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py && python get-pip.py pip==20.2.4 && pip --version\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/6.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/6.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-6-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 5\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/2.0.0/installation.html\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"On November 2020, new version of PIP (20.3) has been released with a new, 2020 resolver. This resolver might work with Apache Airflow as of 20.3.3, but it might lead to errors in installation. It might depend on your choice of extras. In order to install Airflow you might need to either downgrade pip to version 20.2.4 pip install --upgrade pip==20.2.4 or, in case you use Pip 20.3, you need to add option --use-deprecated legacy-resolver to your pip install command.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"This completes python and pip installation\"))), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"airflow-201\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#airflow-201\",\n    \"aria-label\": \"airflow 201 permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Airflow 2.0.1\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/start/local.html\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"airflow needs a home, ~/airflow is the default, but you can lay foundation somewhere else if you prefer (optional)\"))), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create directories and set environment variables\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"mkdir airflow && mkdir dags_root && mkdir logs_root  && echo 'export AIRFLOW_HOME=\\\"/home/ubuntu/airflow\\\"' >> ~/.bashrc && echo 'export AIRFLOW_VERSION=\\\"2.0.1\\\"' >> ~/.bashrc && echo 'export PYTHON_VERSION=\\\"$(python --version | cut -d \\\" \\\" -f 2 | cut -d \\\".\\\" -f 1-2)\\\"' >> ~/.bashrc && echo 'export CONSTRAINT_URL=\\\"https://raw.githubusercontent.com/apache/airflow/constraints-${AIRFLOW_VERSION}/constraints-${PYTHON_VERSION}.txt\\\"' >> ~/.bashrc && source ~/.bashrc\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/7.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/7.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-7-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create virtual environment, the installation causes issues with gunicorn if not using one\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"cd airflow && pip install virtualenv && virtualenv -p python3.6 airflow_venv && source airflow_venv/bin/activate\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/8.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/8.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-8-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Install Apache Airflow 2.0.1\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"pip install \\\"apache-airflow==${AIRFLOW_VERSION}\\\" --constraint \\\"${CONSTRAINT_URL}\\\"\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/9.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/9.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-9-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This completes Apache Airflow 2 installation\")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"postgres-12\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#postgres-12\",\n    \"aria-label\": \"postgres 12 permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Postgres 12\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://www.digitalocean.com/community/tutorials/how-to-install-postgresql-on-ubuntu-20-04-quickstart\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Postgres installation\"))), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Install Postgres 12\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo apt update && sudo apt install postgresql postgresql-contrib\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/10.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/10.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-10-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Your data directory would be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/var/lib/postgresql/12/main\"), \" and log file would be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/var/log/postgresql/postgresql-12-main.log\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Setup Postgres\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo -i -u postgres\\ncreatedb airflow\\n\\ncreateuser --interactive\\n## Enter name of role to add: \\nairflow\\n\\n## Shall the new role be a superuser? (y/n)\\ny\\nexit\\n\\n## Add airflow user\\nsudo adduser airflow\\nsudo -u airflow psql\\n\")), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://chartio.com/resources/tutorials/how-to-list-databases-and-tables-in-postgresql-using-psql/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"List databases and tables to verify\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"\\\\l\\n\\\\c airflow\\n\\\\dt\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/11.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/11.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-11-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 5\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/howto/set-up-database.html\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Setup users\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo -i -u postgres\\npsql\\nCREATE USER airflow_user WITH PASSWORD 'airflow_user';\\nGRANT ALL PRIVILEGES ON DATABASE airflow TO airflow_user;\\nexit\\n\\nexit\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/12.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/12.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-12-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 6\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This completes Postgres installation and setup\")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"airflow-201-config\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#airflow-201-config\",\n    \"aria-label\": \"airflow 201 config permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Airflow 2.0.1 config\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Change the config as per requirement\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Defaults are available at \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html\"\n  }, \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"vim /home/ubuntu/airflow/airflow.cfg\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Recommended for optimum usage\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#dags-folder\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"dags_folder = /home/ubuntu/dags_root\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/executor/local.html\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"executor = LocalExecutor\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#sql-alchemy-conn\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"sql_alchemy_conn = postgresql+psycopg2://airflow_user:airflow_user@localhost:5432/airflow\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#base-log-folder\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"base_log_folder = /home/ubuntu/logs_root\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#logging-level\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"logging_level = DEBUG\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/security/api.html#disable-authentication\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"auth_backend = airflow.api.auth.backend.default\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://github.com/apache/airflow/issues/13487#issuecomment-757661848\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"enable_xcom_pickling = True\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://stackoverflow.com/a/65380493/3152654\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"job_heartbeat_sec = 120\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://stackoverflow.com/a/47562663/3152654\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"min_file_process_interval = 120\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://big-data-demystified.ninja/2020/03/23/airflow-performance-tuning-in-5-min/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"scheduler_zombie_task_threshold = 1800\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Optional but useful\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#expose-config\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"expose_config = True\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#base-url\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"base_url = http://continental.thehightable.org:8080\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#hostname-callable\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"hostname_callable = socket:gethostname\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#worker-autoscale\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"worker_autoscale = 16,12\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#broker-url\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"broker_url = amqp://guest:guest@localhost:5672//\")), mdx(\"blockquote\", null, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow/stable/configurations-ref.html#result-backend\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"celery_result_backend = amqp://guest:guest@localhost:5672//\")), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Boot up webserver\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"airflow webserver\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/13.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/13.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-13-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://stackoverflow.com/a/65079921/3152654\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Fix ## ImportError: No module named psycopg2\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo apt-get update && sudo apt-get install libpq-dev && pip3 install psycopg2-binary\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/14.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/14.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-14-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Initialize the database (This has to be done only once you set your config else it'll take the settings from config before you edited the config)\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"airflow db init\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/15.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/15.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-15-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 5\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create airflow user\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"## username john\\n## password wick\\nairflow users create \\\\\\n    --username john \\\\\\n    --firstname John \\\\\\n    --lastname Wick \\\\\\n    --role Admin \\\\\\n    --email john@thehightable.org\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/16.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/16.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-16-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 6\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Boot up the scheduler (from a new ssh session)\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"cd airflow && source airflow_venv/bin/activate && airflow scheduler\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/17.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/17.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-17-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 7\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Boot up the webserver (from a same session as of until point 5)\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"airflow webserver\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/18.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/18.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-18-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 8\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Login at the login prompt @IP:8080/localhost:8080 (Be sure that the port 8080 is open)\"), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/19.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/19.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-19-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Airflow dashboard\"), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/20.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/20.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-20-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"This completes Apache Airflow 2 configuration\"))), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"docker-20107\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#docker-20107\",\n    \"aria-label\": \"docker 20107 permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Docker 20.10.7\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://docs.docker.com/engine/install/ubuntu/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Docker installation\"))), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Install docker 20.10.7\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"cd /tmp && curl -fsSL https://get.docker.com -o get-docker.sh && sh get-docker.sh\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/21.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/21.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-21-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Get the GID for the docker group\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"cd ~ && getent group docker | cut -d: -f3\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/22.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/22.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-22-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://www.howtogeek.com/50787/add-a-user-to-a-group-or-second-group-on-linux/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Add user to docker group\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo usermod -aG docker ubuntu\\n\")), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://www.howtogeek.com/howto/ubuntu/see-which-groups-your-linux-user-belongs-to/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Verify user has been added to docker group\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"groups ubuntu\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/23.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/23.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-23-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 5\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Install requirements (you can also add this entry to your dags repo root in by \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"&& pip freeze > requirements.txt\"), \" succeeding the below command)\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"pip install apache-airflow-providers-docker\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/24.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/24.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-24-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 6\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://blog.usejournal.com/how-to-enable-docker-remote-api-on-docker-host-7b73bd3278c6\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Enable docker remote API on docker host (comments section)\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo vim /lib/systemd/system/docker.service\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"# Comment the original line for backup to revert if needed\\n#ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock\\nExecStart=/usr/bin/dockerd -H fd:// -H 0.0.0.0:2375 --containerd=/run/containerd/containerd.sock\\n\")), mdx(\"ol\", {\n    \"start\": 7\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Reload - restart daemon and verify docker remote API response\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo systemctl daemon-reload\\nsudo service docker restart\\ncurl http://localhost:2375/images/json\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/25.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/25.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-25-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 8\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This completes docker 20.10.7 installation and setup\")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"gitlab-container-registry\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#gitlab-container-registry\",\n    \"aria-label\": \"gitlab container registry permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Gitlab container registry\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://docs.gitlab.com/ee/user/packages/container_registry/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"About Gitlab container registry\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"This post uses connection to Gitlab container registry via docker remote API, without using connection from Airflow via the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"docker_conn_id\"), \" parameter\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Sample URLs where you can find container registry for your repo based on the repo being used for the post \", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://gitlab.com/blogs-imsheth-com/airflow2-dockeroperator-nodejs-gitlab/container_registry\"), \" \", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://gitlab.com/blogs-imsheth-com/airflow2-dockeroperator-nodejs-gitlab/-/settings/repository\"), \" \", mdx(\"br\", null))), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create sample project in Gitlab on your local machine\", mdx(\"blockquote\", {\n    parentName: \"li\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Crete repo like \", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://gitlab.com/blogs-imsheth-com/airflow2-dockeroperator-nodejs-gitlab\"), \" \", mdx(\"br\", null), \"\\nAdd your deploy key at \", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://gitlab.com/blogs-imsheth-com/airflow2-dockeroperator-nodejs-gitlab/-/settings/repository#js-deploy-keys-settings\"), \" \", mdx(\"br\", null), \"\\nClone the repo \", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://gitlab.com/blogs-imsheth-com/airflow2-dockeroperator-nodejs-gitlab\"), \" \", mdx(\"br\", null), \"\\nCopy paste sample code from \", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://github.com/imsheth/airflow2-dockeroperator-nodejs-gitlab\"), \" \", mdx(\"br\", null), \"\\nPush to your repo \", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"git push origin master\"))))), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/26.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/26.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-26-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://docs.docker.com/engine/reference/commandline/login/#privileged-user-requirement\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"You need to login to the Gitlab container registry from docker on your local machine (this step also needs to be done on the server). Basically, this step generates the required file at `~/.docker/config.json`\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo docker login registry.gitlab.com\\n\\nWARNING! Your password will be stored unencrypted in /root/.docker/config.json.\\nConfigure a credential helper to remove this warning. See\\nhttps://docs.docker.com/engine/reference/commandline/login/#credentials-store\\n\\nLogin Succeeded\\n\")), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Copy and update config json access on your local machine (this step also needs to be done on the server)\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"mkdir ~/.docker && sudo cp /root/.docker/config.json ~/.docker/config.json && sudo cat ~/.docker/config.json && sudo chmod 777 ~/.docker/config.json\\n\")), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Publish container to Gitlab from local from the root where Dockerfile is present (this will need the local docker daemon to be running, if not already then start it)\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo docker build -t registry.gitlab.com/blogs-imsheth-com/airflow2-dockeroperator-nodejs-gitlab . && sudo docker push registry.gitlab.com/blogs-imsheth-com/airflow2-dockeroperator-nodejs-gitlab\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/27.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/27.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-27-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/28.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/28.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-28-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 5\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This completes Gitlab container registry installation and setup\")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"airflow-dags\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#airflow-dags\",\n    \"aria-label\": \"airflow dags permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Airflow DAGs\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"DAGs will run the nodejs code\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://github.com/apache/airflow/blob/master/airflow/providers/docker/example_dags/example_docker.py\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Sample DAG for DockerOperator\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://github.com/imsheth/airflow2-dockeroperator-nodejs-gitlab\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Clone your repo on server, source for current post can be found here\"))), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Activate virtual environment, clone at proper path, install dependencies\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"cd airflow && source airflow_venv/bin/activate\\ncd ~/dags_root/ && git clone https://github.com/imsheth/airflow2-dockeroperator-nodejs-gitlab && cd airflow2-dockeroperator-nodejs-gitlab/dags && pip install -r requirements.txt\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/29.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/29.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-29-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Your DAG is now available, first enable/unpause before triggering and then trigger it\"), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/30.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/30.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-30-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Trigger your DAG run\"), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/31.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/31.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-31-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"DAG run successful\"), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/32.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/32.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-32-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"DAG run details for the successful run\"), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/33.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/33.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-33-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"DAG run task details graph view for the successful run\"), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/34.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/34.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-34-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Task detail from DAG run task details graph view for the successful run\"), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/35.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/35.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-35-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Task log from DAG run task details graph view for the successful run\"), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/36.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/36.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-36-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"This completes DAG run with DockerOperator in Airflow, however keep in mind that minimum AWS EC2 t2.medium equivalent instance will be required on the server to just run the DAGs with DockerOperator in Airflow \"))), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"systemd-service\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#systemd-service\",\n    \"aria-label\": \"systemd service permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"systemd service\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://github.com/apache/airflow/tree/master/scripts/systemd\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Sample scripts\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://medium.com/@shahbaz.ali03/run-apache-airflow-as-a-service-on-ubuntu-18-04-server-b637c03f4722\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Running Apache-Airflow as a service\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://medium.com/@vando/airflow-inside-a-virtual-enviroment-and-integrated-with-systemd-3b6427bd6430\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Running Apache-Airflow as a service in virtual environment\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://www.freedesktop.org/software/systemd/man/systemd.service.html\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"systemd manual\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://medium.com/@achilleus/easy-way-to-manage-your-airflow-setup-b7c030dd1cb8\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Running Apache-Airflow as a service in virtual environment\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://tech.akom.net/archives/93-Getting-a-systemd-unit-to-read-your-.bashrc-file-for-its-environment.html\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"systemd unit doesn't interpolate variables and it will ignore lines starting with \\\"export\\\" in .bashrc\"))), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"systemd unit doesn't interpolate variables and it will ignore lines starting with \\\"export\\\" in .bashrc, which causes the issue on server restart as the variables are not exported (add the following to a startup script)\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"env > /tmp/.magic-environment-file\\n\")), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://github.com/imsheth/airflow2-dockeroperator-nodejs-gitlab/tree/master/services\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Service configurations\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo vim /etc/systemd/system/airflow-webserver.service\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"[Unit]\", \" \", mdx(\"br\", null), \"\\nDescription=Airflow webserver daemon service template for Ubuntu 20.04.2 \", mdx(\"br\", null), \"\\nAfter=network.target postgresql.service \", mdx(\"br\", null), \"\\nWants=postgresql.service \", mdx(\"br\", null), \"\\n\", \"[Service]\", \" \", mdx(\"br\", null), \"\\n#PIDFile=/run/airflow/webserver.pid \", mdx(\"br\", null), \"\\nUser=ubuntu \", mdx(\"br\", null), \"\\nGroup=ubuntu \", mdx(\"br\", null), \"\\nType=simple \", mdx(\"br\", null), \"\\nEnvironmentFile=-/tmp/.magic-environment-file \", mdx(\"br\", null), \"\\nExecStart=/usr/bin/bash -c 'source /home/ubuntu/airflow/airflow_venv/bin/activate ; /home/ubuntu/airflow/airflow_venv/bin/airflow db upgrade ; /home/> ubuntu/airflow/airflow_venv/bin/airflow webserver' \", mdx(\"br\", null), \"\\nRestart=on-failure \", mdx(\"br\", null), \"\\nRestartSec=60s \", mdx(\"br\", null), \"\\nPrivateTmp=true \", mdx(\"br\", null), \"\\n\", \"[Install]\", \" \", mdx(\"br\", null), \"\\nWantedBy=multi-user.target \", mdx(\"br\", null))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo vim /etc/systemd/system/airflow-scheduler.service\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"[Unit]\", \" \", mdx(\"br\", null), \"\\nDescription=Airflow scheduler daemon service template for Ubuntu 20.04.2 \", mdx(\"br\", null), \"\\nAfter=network.target postgresql.service \", mdx(\"br\", null), \"\\nWants=postgresql.service \", mdx(\"br\", null), \"\\n\", \"[Service]\", \" \", mdx(\"br\", null), \"\\n#PIDFile=/run/airflow/scheduler.pid \", mdx(\"br\", null), \"\\nUser=ubuntu \", mdx(\"br\", null), \"\\nGroup=ubuntu \", mdx(\"br\", null), \"\\nType=simple \", mdx(\"br\", null), \"\\nEnvironmentFile=-/tmp/.magic-environment-file \", mdx(\"br\", null), \"\\nExecStart=/usr/bin/bash -c 'source /home/ubuntu/airflow/airflow_venv/bin/activate ; /home/ubuntu/airflow/airflow_venv/bin/airflow scheduler' \", mdx(\"br\", null), \"\\nRestart=on-failure \", mdx(\"br\", null), \"\\nRestartSec=60s \", mdx(\"br\", null), \"\\nPrivateTmp=true \", mdx(\"br\", null), \"\\n\", \"[Install]\", \" \", mdx(\"br\", null), \"\\nWantedBy=multi-user.target \", mdx(\"br\", null))), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Reload daemon, enable and start services\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo systemctl daemon-reload && sudo systemctl enable airflow-webserver.service && sudo systemctl enable airflow-scheduler.service && sudo systemctl start airflow-webserver.service && sudo systemctl start airflow-scheduler.service\\n\")), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Check service status\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"systemctl status airflow-webserver.service\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/37.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/37.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-37-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 5\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Check service status\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"systemctl status airflow-scheduler.service\\n\")), mdx(\"a\", {\n    href: \"/posts/airflow2-dockeroperator-nodejs-gitlab/38.png\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, mdx(\"img\", {\n    src: \"/posts/airflow2-dockeroperator-nodejs-gitlab/38.png\",\n    alt: \"airflow2-dockeroperator-nodejs-gitlab-38-png\",\n    align: \"left\",\n    style: {\n      \"marginRight\": \"2rem\",\n      \"marginBottom\": \"1rem\"\n    }\n  })), mdx(\"ol\", {\n    \"start\": 6\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Checking sysetmd logs\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"journalctl -xe\\n\")), mdx(\"ol\", {\n    \"start\": 7\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://unix.stackexchange.com/questions/225401/how-to-see-full-log-from-systemctl-status-service\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Check full systemd logs\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"journalctl -u airflow-webserver.service -e\\n\")), mdx(\"ol\", {\n    \"start\": 8\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Check live logs\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"journalctl -u airflow-webserver.service -e -f\\n\")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"deployment\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#deployment\",\n    \"aria-label\": \"deployment permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Deployment\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This command can be added to your deployment pipeline\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"cd /home/ubuntu/dags_root/airflow2-dockeroperator-nodejs-gitlab/dags && source /home/ubuntu/airflow/airflow_venv/bin/activate && git pull && pip install -r /home/ubuntu/dags_root/airflow2-dockeroperator-nodejs-gitlab/dags/requirements.txt && sudo systemctl stop airflow-webserver.service && sudo systemctl start airflow-webserver.service && sudo systemctl stop airflow-scheduler.service && sudo systemctl start airflow-scheduler.service\\n\")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"unsuccessful-trials\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#unsuccessful-trials\",\n    \"aria-label\": \"unsuccessful trials permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Unsuccessful trials\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Trials with airflow2 inside docker\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"iframe\", {\n    parentName: \"li\",\n    \"width\": \"100%\",\n    \"height\": 315,\n    \"src\": \"https://www.youtube-nocookie.com/embed/aTaytcxy2Ck?rel=0\",\n    \"frameBorder\": \"0\",\n    \"allow\": \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",\n    \"allowFullScreen\": true\n  })), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://airflow.apache.org/docs/apache-airflow/stable/docker-compose.yaml\"\n  }, \"https://airflow.apache.org/docs/apache-airflow/stable/docker-compose.yaml\"), \" with edits for permissions for docker installation, which failed miserably\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://stackoverflow.com/questions/41381350/docker-compose-installing-requirements-txt\"\n  }, \"https://stackoverflow.com/questions/41381350/docker-compose-installing-requirements-txt\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://stackoverflow.com/questions/45211594/running-a-custom-script-using-entrypoint-in-docker-compose\"\n  }, \"https://stackoverflow.com/questions/45211594/running-a-custom-script-using-entrypoint-in-docker-compose\"))), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Trials with airflow2 inside docker with DockerOperator (docker inside docker)\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"iframe\", {\n    parentName: \"li\",\n    \"width\": \"100%\",\n    \"height\": 315,\n    \"src\": \"https://www.youtube-nocookie.com/embed/4_rQSkN1joA?rel=0\",\n    \"frameBorder\": \"0\",\n    \"allow\": \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",\n    \"allowFullScreen\": true\n  })), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://stackoverflow.com/questions/59765453/how-to-use-the-dockeroperator-from-apache-airflow\"\n  }, \"https://stackoverflow.com/questions/59765453/how-to-use-the-dockeroperator-from-apache-airflow\"))), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Referred initially but not used fully\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://vujade.co/install-apache-airflow-ubuntu-18-04/\"\n  }, \"https://vujade.co/install-apache-airflow-ubuntu-18-04/\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://towardsdatascience.com/setting-up-apache-airflow-2-with-docker-e5b974b37728\"\n  }, \"https://towardsdatascience.com/setting-up-apache-airflow-2-with-docker-e5b974b37728\"))), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"miscellaneous\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#miscellaneous\",\n    \"aria-label\": \"miscellaneous permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Miscellaneous\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Purging all unused or dangling images, containers, volumes, and networks. This was used in research and development phase\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"docker system prune -af\\n\\ndocker images -a\\ndocker container ls\\ndocker ps -a\\n\")), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    href: \"https://airflow.apache.org/docs/apache-airflow-providers-docker/stable/_api/airflow/providers/docker/operators/docker/index.html\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Important parameters for DockerOperator, which helped avoid commands in above point\"))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Sample at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/imsheth/airflow2-dockeroperator-nodejs-gitlab/blob/master/dags/docker_provider.py\"\n  }, \"https://github.com/imsheth/airflow2-dockeroperator-nodejs-gitlab/blob/master/dags/docker_provider.py\"), \" \", mdx(\"br\", null), \"\\nforce_pull = True \", mdx(\"br\", null), \"\\nxcom_all = True \", mdx(\"br\", null), \"\\nauto_remove = True \", mdx(\"br\", null), \"\\ntty = True \", mdx(\"br\", null))), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"SSH for deployment\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"ssh-keygen -t rsa -b 2048 -C \\\"john@thehightable.org\\\"\\n\")), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Add to repo for deploy keys\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"cat id_rsa.pub\\n\")), mdx(\"ol\", {\n    \"start\": 5\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"For running DAGs with DockerOperator\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://github.com/docker/for-mac/issues/770#issuecomment-252560286\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Docker for Mac doesn't listen on 2375\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://github.com/docker/docker-py/issues/1916\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"docker.from_env() causes TypeError: load_config() got an unexpected keyword argument 'config_dict'\"))), mdx(\"ol\", {\n    \"start\": 6\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Gitlab registry\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://stackoverflow.com/questions/58733579/airflow-pull-docker-image-from-private-google-container-repository\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Airflow pull docker image from private google container repository\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://stackoverflow.com/a/65219624/3152654\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"No Docker registry URL provided\"))), mdx(\"ol\", {\n    \"start\": 7\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"docker remote API\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://blog.usejournal.com/how-to-enable-docker-remote-api-on-docker-host-7b73bd3278c6\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Enabling docker remote API\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"ExecStart=/usr/bin/dockerd -H fd:// -H 0.0.0.0:2375 --containerd=/run/containerd/containerd.sock\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://www.redhat.com/sysadmin/getting-started-socat\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Connecting to docker remote API via socat\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"DOCKER_GROUP_ID=`getent group docker | cut -d: -f3` sudo docker-compose up -d\\ndocker run -d -v /var/run/docker.sock:/var/run/docker.sock -p 127.0.0.1:2375:2375 bobrik/socat TCP-LISTEN:2375,fork UNIX-CONNECT:/var/run/docker.sock\\n\")), mdx(\"ol\", {\n    \"start\": 8\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"macOS issues\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://github.com/apache/airflow/issues/10435\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Negsignal.SIGKILL error on macOS\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://stackoverflow.com/a/59828133/3152654\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Airflow task running tweepy exits with return code -6\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    href: \"https://stackoverflow.com/a/52230415/3152654\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Multiprocessing causes Python to crash and gives an error may have been in progress in another thread when fork() was called\"))), mdx(\"ol\", {\n    \"start\": 7\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Check docker container logs\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"sudo docker ps\\nsudo docker exec -it 82f4b968cb6d sh\\nsudo docker-compose logs --tail=\\\"all\\\" -f\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#airflow\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#airflow2\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#apacheairflow\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#apacheairflow2.0.1\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#dockeroperator\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#docker\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#python\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#python3.6\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#pip\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#pip20.2.4\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#ubuntu\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#ubuntu20.04.2lts\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#tech\")), mdx(\"hr\", null), mdx(\"div\", {\n    \"style\": {\n      \"textAlign\": \"left\",\n      \"marginTop\": \"0.55rem\",\n      \"marginBottom\": \"0.40rem\"\n    }\n  }, \"\\n  \", mdx(\"a\", {\n    parentName: \"div\",\n    \"href\": \"https://twitter.com/theimsheth\",\n    \"target\": \"_blank\",\n    \"rel\": \"noopener noreferrer\",\n    \"style\": {\n      \"textDecoration\": \"none\"\n    }\n  }, \"\\n    \", mdx(\"img\", {\n    parentName: \"a\",\n    \"src\": \"/social/twitter.svg\",\n    \"alt\": \"twitter\",\n    \"style\": {\n      \"height\": \"32px\",\n      \"width\": \"32px\",\n      \"margin\": \".2rem\"\n    }\n  }), \"\\n  \"), \"\\n  \", mdx(\"a\", {\n    parentName: \"div\",\n    \"href\": \"https://github.com/imsheth\",\n    \"target\": \"_blank\",\n    \"rel\": \"noopener noreferrer\",\n    \"style\": {\n      \"textDecoration\": \"none\"\n    }\n  }, \"\\n    \", mdx(\"img\", {\n    parentName: \"a\",\n    \"src\": \"/social/github.svg\",\n    \"alt\": \"github\",\n    \"style\": {\n      \"height\": \"32px\",\n      \"width\": \"32px\",\n      \"margin\": \".2rem\"\n    }\n  }), \"\\n  \"), \"\\n  \", mdx(\"a\", {\n    parentName: \"div\",\n    \"href\": \"https://www.npmjs.com/~imsheth\",\n    \"target\": \"_blank\",\n    \"rel\": \"noopener noreferrer\",\n    \"style\": {\n      \"textDecoration\": \"none\"\n    }\n  }, \"\\n    \", mdx(\"img\", {\n    parentName: \"a\",\n    \"src\": \"/social/npm.svg\",\n    \"alt\": \"npm\",\n    \"style\": {\n      \"height\": \"32px\",\n      \"width\": \"32px\",\n      \"margin\": \".2rem\"\n    }\n  }), \"\\n  \"), \"\\n  \", mdx(\"a\", {\n    parentName: \"div\",\n    \"href\": \"https://stackoverflow.com/users/3152654/imsheth?tab=profile\",\n    \"target\": \"_blank\",\n    \"rel\": \"noopener noreferrer\",\n    \"style\": {\n      \"textDecoration\": \"none\"\n    }\n  }, \"\\n    \", mdx(\"img\", {\n    parentName: \"a\",\n    \"src\": \"/social/stackoverflow.svg\",\n    \"alt\": \"stackoverflow\",\n    \"style\": {\n      \"height\": \"32px\",\n      \"width\": \"32px\",\n      \"margin\": \".2rem\"\n    }\n  }), \"\\n  \"), \"\\n  \", mdx(\"a\", {\n    parentName: \"div\",\n    \"href\": \"https://in.linkedin.com/in/imsheth\",\n    \"target\": \"_blank\",\n    \"rel\": \"noopener noreferrer\",\n    \"style\": {\n      \"textDecoration\": \"none\"\n    }\n  }, \"\\n    \", mdx(\"img\", {\n    parentName: \"a\",\n    \"src\": \"/social/linkedin.svg\",\n    \"alt\": \"linkedin\",\n    \"style\": {\n      \"height\": \"32px\",\n      \"width\": \"32px\",\n      \"margin\": \".2rem\"\n    }\n  }), \"\\n  \"), \"\\n  \", mdx(\"a\", {\n    parentName: \"div\",\n    \"href\": \"https://instagram.com/imsheth/\",\n    \"target\": \"_blank\",\n    \"rel\": \"noopener noreferrer\",\n    \"style\": {\n      \"textDecoration\": \"none\"\n    }\n  }, \"\\n    \", mdx(\"img\", {\n    parentName: \"a\",\n    \"src\": \"/social/instagram.svg\",\n    \"alt\": \"instagram\",\n    \"style\": {\n      \"height\": \"32px\",\n      \"width\": \"32px\",\n      \"margin\": \".2rem\"\n    }\n  }), \"\\n  \"), \"\\n  \", mdx(\"a\", {\n    parentName: \"div\",\n    \"href\": \"https://www.facebook.com/imsheth\",\n    \"target\": \"_blank\",\n    \"rel\": \"noopener noreferrer\",\n    \"style\": {\n      \"textDecoration\": \"none\"\n    }\n  }, \"\\n    \", mdx(\"img\", {\n    parentName: \"a\",\n    \"src\": \"/social/facebook.svg\",\n    \"alt\": \"facebook\",\n    \"style\": {\n      \"height\": \"32px\",\n      \"width\": \"32px\",\n      \"margin\": \".2rem\"\n    }\n  }), \"\\n  \"), \"\\n  \", mdx(\"a\", {\n    parentName: \"div\",\n    \"href\": \"https://open.spotify.com/user/orekqqr23uij1ehi7upg9akat?si=xXA0ZUqxQW2GgFYzdXgAOA&nd=1\",\n    \"target\": \"_blank\",\n    \"rel\": \"noopener noreferrer\",\n    \"style\": {\n      \"textDecoration\": \"none\"\n    }\n  }, \"\\n    \", mdx(\"img\", {\n    parentName: \"a\",\n    \"src\": \"/social/spotify.svg\",\n    \"alt\": \"spotify\",\n    \"style\": {\n      \"height\": \"32px\",\n      \"width\": \"32px\",\n      \"margin\": \".2rem\"\n    }\n  }), \"\\n  \"), \"\\n  \", mdx(\"a\", {\n    parentName: \"div\",\n    \"href\": \"https://www.tvshowtime.com/1589595\",\n    \"target\": \"_blank\",\n    \"rel\": \"noopener noreferrer\",\n    \"style\": {\n      \"textDecoration\": \"none\"\n    }\n  }, \"\\n    \", mdx(\"img\", {\n    parentName: \"a\",\n    \"src\": \"/social/tvtime.svg\",\n    \"alt\": \"tvshowtime\",\n    \"style\": {\n      \"height\": \"32px\",\n      \"width\": \"32px\",\n      \"margin\": \".2rem\"\n    }\n  }), \"\\n  \"), \"\\n  \\n\"), mdx(\"hr\", null), mdx(\"br\", null), mdx(Giscus, {\n    id: \"comments\",\n    repo: \"imsheth/imsheth.github.io\",\n    repoId: \"MDEwOlJlcG9zaXRvcnk2Mjg4MDczMw==\",\n    category: \"Announcements\",\n    categoryId: \"DIC_kwDOA7973c4CP60t\",\n    mapping: \"url\",\n    term: \"Welcome to @giscus/react component!\",\n    reactionsEnabled: \"1\",\n    emitMetadata: \"1\",\n    inputPosition: \"top\",\n    theme: \"light\",\n    lang: \"en\",\n    loading: \"lazy\",\n    mdxType: \"Giscus\"\n  }));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"depth":2,"value":"Ubuntu 20.x.x"},{"depth":2,"value":"python 3.6"},{"depth":2,"value":"Airflow 2.0.1"},{"depth":2,"value":"Postgres 12"},{"depth":2,"value":"Airflow 2.0.1 config"},{"depth":2,"value":"Docker 20.10.7"},{"depth":2,"value":"Gitlab container registry"},{"depth":2,"value":"Airflow DAGs"},{"depth":2,"value":"systemd service"},{"depth":2,"value":"Deployment"},{"depth":2,"value":"Unsuccessful trials"},{"depth":2,"value":"Miscellaneous"}]}},"pageContext":{"slug":"/posts/tags/tech/airflow2-dockeroperator-nodejs-gitlab/","next":{"label":"Meta","link":"/"},"repositoryEditUrl":"https://github.com/imsheth/imsheth.github.io/tree/main/src/docs/posts/tags/tech/airflow2-dockeroperator-nodejs-gitlab.mdx","repositoryProvider":"GitHub"}},"staticQueryHashes":["1954253342","2328931024","2501019404","973074209"]}